CREATE OR REPLACE TABLE ORDERS (
	DATA VARIANT
)COMMENT='zomaggy json data....'
;



CREATE OR REPLACE TABLE USER_DETAILS (
	USER_ID NUMBER PRIMARY KEY,
	USER_NAME VARCHAR(50) NOT NULL,
	EMAIL_ID VARCHAR(40),
	MOBILE NUMBER(10) NOT NULL,
	CUSTOMER_USER_AGENT VARCHAR(40),
    IS_SUBSCRIBED BOOLEAN
);


CREATE OR REPLACE TABLE DELIVERY_PERSON_DETAILS (
	DELIVERY_PERSON_ID NUMBER PRIMARY KEY,
	NAME VARCHAR(50) NOT NULL,
	GENDER VARCHAR(10),
	MOBILE NUMBER(10) NOT NULL
);


CREATE OR REPLACE TABLE DELIVERY_DETAILS (
    DELIVERY_ID NUMBER PRIMARY KEY,
	DELIVERY_PERSON_ID NUMBER REFERENCES DELIVERY_PERSON_DETAILS(DELIVERY_PERSON_ID) NOT NULL,
	DELIVERED_TIME_IN_SECONDS NUMBER(38),
	FREE_SHIPPING BOOLEAN,
	ON_TIME BOOLEAN,
    ACTUAL_SLA_TIME NUMBER(10) NOT NULL,
    SLA_DIFFERENCE NUMBER(10) NOT NULL,
    ADDRESS_LINE1 VARCHAR(30),
    STATE VARCHAR(30) NOT NULL,
    FLAT_NO NUMBER(10),
PINCODE NUMBER(6) NOT NULL,    
CITY VARCHAR(30) NOT NULL,
    LANDMARK VARCHAR(30),
    AREA VARCHAR(30) NOT NULL,
    ANNOTATION VARCHAR(30),
    LAT NUMBER(24,20) NOT NULL,
    LNG NUMBER(24,20) NOT NULL 
);


CREATE OR REPLACE TABLE restaurant_details (
	restaurant_id NUMBER(10) PRIMARY KEY,
	restaurant_cuisine varchar(100),
	show_rate_us boolean,
	rating Number(1),
	restaurant_lat Number(24,20),
	restaurant_lng NUMBER(24,20),
	restaurant_Customer_distance NUMBER(2,2),
	restaurant_area_name VARCHAR(20),
	restaurant_name VARCHAR(50),
	restaurant_address VARCHAR(100),
	restaurant_city_name VARCHAR(10),
restaurant_state VARCHAR(10) NOT NULL,
	restaurant_pincode NUMBER(6) NOT NULL
);


CREATE OR REPLACE TABLE coupon_details (
    coupon_id NUMBER PRIMARY KEY,
	is_coupon_applied boolean,
	coupon_discount NUMBER(23,8),
	coupon_type VARCHAR(10)
);


CREATE OR REPLACE TABLE BILLING_DETAILS (
    BILLING_ID NUMBER PRIMARY KEY,
    COUPON_ID NUMBER REFERENCES COUPON_DETAILS(COUPON_ID) NOT NULL,
    DELIVERY_ID NUMBER REFERENCES DELIVERY_DETAILS(DELIVERY_ID) NOT NULL,
    TIP_DETAILS VARCHAR(30),
    PAYMENT_METHOD VARCHAR(30),
    TRANSACTION_STATUS VARCHAR(30),
    NET_TOTAL NUMBER(38,4),
    CONVENIENCE_FEE NUMBER(38,4),
    ORDER_DELIVERY_CHARGE NUMBER(38,4),
    PAYMENT_TXN_ID NUMBER,
    IS_BANK_DISCOUNT BOOLEAN,
    SAVINGS_SHOWN_TO_CUSTOMER BOOLEAN,
    TOTAL_TAX NUMBER 
)


CREATE OR REPLACE TABLE order_details (
    ORDER_ID NUMBER PRIMARY KEY,
	billing_id NUMBER REFERENCES billing_details(billing_id) NOT NULL,
	delivery_id NUMBER REFERENCES delivery_details(delivery_id) NOT NULL,
	user_id NUMBER REFERENCES user_details(user_id) NOT NULL,
	restaurant_id NUMBER(10) REFERENCES restaurant_details(restaurant_id) NOT NULL,
	order_items varchar(100),
	order_time DATETIME,
	order_status Varchar(10),
	order_type VARCHAR(10),
	order_delivery_status VARCHAR(10),
	order_total NUMBER(38,0),
	item_total NUMBER(38,0),
    order_packing_charges NUMBER(38,0),
    trade_discount NUMBER(38,0),
    tip NUMBER(38,0),
	order_discount NUMBER(38,0),
	prep_time TIME,
	is_refund_initiated boolean,
	is_long_distance boolean,
	is_cancellable boolean
  )


CREATE TABLE "ZOMAGGY_DB"."INCOMING"."FOOD_DETAILS" (
	"ITEMS" STRING NOT NULL, 
	"Weight" NUMBER (10,2), 
	"Quantity" NUMBER (10,2), 
	"Calories" NUMBER (10,2)
	);